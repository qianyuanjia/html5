<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Canvas钟表</title>
</head>
<body>
	<canvas id="can" height="400" width="400"></canvas>
<script>
	var canvas=document.getElementById('can');
	var ctx=canvas.getContext('2d');
	var date=new Date();
	var second=date.getSeconds();
	var minute=date.getMinutes();
	var hour=date.getHours();

	
	drawTick(ctx,200,200,100,90,98,6,4);
	drawTick(ctx,200,200,100,85,98,30,4);

	drawPin(ctx,200,200,83,15,second*6-90,6,3,'green',1);
	drawPin(ctx,200,200,60,15,minute*6-90,6,3,'gray',2);
	drawPin(ctx,200,200,40,15,hour*6-90,6,3,'blue',2);

	drawHeart();
	secondPin();

	function drawRad(ctx,x,y,r,diff){
		ctx.save();
		for(var i=0;i<360;i=i+diff){
			ctx.beginPath();
			ctx.moveTo(x,y);
			ctx.arc(x,y,r,i*Math.PI/180,(i+diff)*Math.PI/180);
			ctx.stroke();
		}
		ctx.restore();
	}

	function drawTick(ctx,x,y,r1,r2,r3,diff,lw){
		
		drawRad(ctx,x,y,r1,diff);
		

		ctx.save();
		ctx.beginPath();
		ctx.fillStyle="#fff";
		ctx.arc(x,y,r2,0,2*Math.PI);
		ctx.fill();
		ctx.restore();

		ctx.save();
		ctx.beginPath();
		ctx.strokeStyle="#fff";
		ctx.lineWidth=lw;
		ctx.arc(x,y,r3,0,2*Math.PI);
		ctx.stroke();
		ctx.restore();
	}

	function secondPin(){
		setInterval(function(){
			var date=new Date();
			var second=date.getSeconds();
			drawPin(ctx,200,200,83,15,(second-1)*6-90,6,3,'white',2);
			drawPin(ctx,200,200,60,15,minute*6-90,6,3,'white',3);
			drawPin(ctx,200,200,40,15,hour*6-90,6,3,'white',3);
			drawPin(ctx,200,200,83,15,second*6-90,6,3,'green',1);
			drawPin(ctx,200,200,60,15,minute*6-90,6,3,'gray',2);
			drawPin(ctx,200,200,40,15,hour*6-90,6,3,'blue',2);
			drawHeart();
		},1000);
	}

	function drawPin(ctx,x,y,r1,r2,start,diff,lw,col,clearlw){
		ctx.save();
		ctx.strokeStyle=col;
		ctx.lineWidth=clearlw;
		ctx.beginPath();
		ctx.moveTo(x,y);
		ctx.arc(x,y,r1,start*Math.PI/180,(start+diff)*Math.PI/180);
		ctx.stroke();
		ctx.restore();

		ctx.save();
		ctx.strokeStyle="#fff";
		ctx.lineWidth=lw;
		ctx.beginPath();
		ctx.arc(x,y,r1,start*Math.PI/180,(start+diff)*Math.PI/180);
		ctx.stroke();
		ctx.restore();

		ctx.save();
		ctx.strokeStyle=col;
		ctx.lineWidth=clearlw;
		ctx.beginPath();
		ctx.moveTo(x,y);
		ctx.arc(x,y,r2,Math.PI+start*Math.PI/180,Math.PI+(start+diff)*Math.PI/180);
		ctx.stroke();
		ctx.restore();

		ctx.save();
		ctx.strokeStyle="#fff";
		ctx.lineWidth=lw;
		ctx.beginPath();
		ctx.arc(x,y,r2,Math.PI+start*Math.PI/180,Math.PI+(start+diff)*Math.PI/180);
		ctx.stroke();
		ctx.restore();
	}

	function drawHeart(){
		ctx.save();
		ctx.beginPath();
		ctx.fillStyle="red";
		ctx.arc(200,200,4,0,2*Math.PI);
		ctx.fill();
		ctx.restore();
	}


	ctx.save();
	ctx.beginPath();
	ctx.strokeStyle="red";
	ctx.lineWidth=2;
	ctx.arc(200,200,100,0,2*Math.PI);
	ctx.stroke();
	ctx.restore();

	
</script>
</body>
</html>